---
layout: post
title:  “初学python的一些小知识点(三)”
date:   2017-1-13
excerpt: "初学python的一些小知识点(三)"
tag:
- python
---

## 初学python的一些小知识点(三)

### 函数

​	在大部分高级语言里，函数的用来抽象计算表达式的，可以通过简单是输入输出以及返回值得到一个计算结果，而不需要关系具体的实现。python 里的函数需要注意，函数名其实就是指向一个函数对象的引用，完全可以把函数名赋给一个变量，相当于给这个函数起了一个“别名”

```python
a = abs # 变量a指向abs函数
print(a(-1)) # 所以也可以通过a调用abs函数
```

- 定义函数：python 定义函数的方式有点不同。在Python中，定义一个函数要使用`def`语句，依次写出函数名、括号、括号中的参数和冒号`:`，然后，在缩进块中编写函数体，函数的返回值用`return`语句返回。例如：

  ```python
  def my_abs(x):
      if x > 0:
          return -x
      else:
          return x

  print(my_abs(-100))
  ```

  拥有了我们自己的函数之后，我们尝试输入别的输入。

  ```python
  my_abs('a') # 报错信息
  ```

- 会发现输入字符的时候会出错，那么是不是能添加添加多类型支持呢？

  ```python
  def my_abs(x):
      if not isinstance(x, (int, float)):
          raise TypeError('bad operand type for %s', x)
      if x > 0:
          return -x
      else:
          return x
  ```

  改造完的自定义函数能接受特定类型的参数，并返回对应的错误信息。

- 空函数：

     如果想定义一个什么事也不做的空函数，可以用`pass`语句：

  ```python
     def nodo():
         pass
  ```

- 函数的多个返回值

  ```python
  def twoReturn(x):
      if x == 1:
          return x * 2, x * 3
      else:
          return x

  x, y = twoReturn(1)
  print(x, y)

  # 返回(2, 3)  看起来是个元组touple
  b = twoReturn(1)
  print(b[0])

  # 输出 2
  ```

  python 里的多个参数返回和swift 是一样的，也是通过元组的形式返回。

### 函数的参数

​	Python的函数定义非常简单，但灵活度却非常大。除了正常定义的必选参数外，还可以使用默认参数、可变参数和关键字参数，使得函数定义出来的接口，不但能处理复杂的参数，还可以简化调用者的代码。

- #### 位置参数

  `x`和`y`，这两个参数都是位置参数，调用函数时，传入的两个值按照位置顺序依次赋给参数`x`和`y`。

  ```python
  def simple(x, y):
      return x + y

  print(simple(1, 2))
  # 3
  ```

- #### 默认参数

  当一个函数的参数可以有默认值的时候就需要一个默认参数

  ```python
  def simple(x, y = 0):
      return x + y

  print(simple(1))
  # 1
  ```

  使用默认参数的注意事项，需要注意默认参数必须指向不变对象。不然就会有以下代码的情况出现：

  ```python

  def add_end(a=[]):
      a.append('END')
      return a

  print(add_end([1, 2, 3]))
  print(add_end())
  print(add_end())
  # [1, 2, 3, 'END']
  # ['END']
  # ['END', 'END']
  ```

  ​	默认参数在函数创建的时候就已经建立了指针索引，当调用有修改参数对象的时候，该修改会一直被保留，所以再定义函数或者变量的时候要再可以肯定的情况下多定义不可变对象，保证程序的的健壮，降低出错的概率。

- ### 定义可变参数

  定义可变参数和定义一个list或tuple参数相比，仅仅在参数前面加了一个`*`号。 后面就可以加入任意参数变量

  ```python
  def calc(*numbers):
      sum = 0
      for n in numbers:
          sum = sum + n * n
      return sump

  print(calc(1, 2))
  print(calc(1, 2, 3, 4))
  print(calc())

  #5
  #30
  #0
  ```

  如要要完整传入某个数组作为参数

  ```python
  nums = [2, 3, 4]
  print(calc(nums[1]))
  print(calc(*nums)) # 将list中所有的元素都作为参数传入
  ```

- #### 关键字参数

  关键字参数能将不是必要填入的参数，作为 dict 传入，并且不限数量。这样做的目的是为了扩展函数的功能，让函数用更强的通用性。下面来看一个例子：

  ```python
  # 关键字参数
  def register(name, gender, **dict):
      print('name:', name, 'gender:', gender, 'otherDict:', dict)

  register('judy', 'woman')
  register('mike', 'man', age = '13', phone = '123456', city = 'New York')

  #也可以将一个完整dict 作为参数传入
  dictRegister = {'age': '20', 'phone': '66666', 'city': 'New York'}
  register('Bob', 'man', **dictRegister)
  ```

  需要注意的是这个 dictRegister 传入的是一份拷贝，而不是引用，简单的来说就是值拷贝，修改函数内 dict 的内容并不会影响 函数外的 dictRegister。

- #### 命名关键字参数

  对于关键字参数，函数的调用者可以传入任意不受限制的关键字参数。至于到底传入了哪些，就需要在函数内部对需要的 key-value 进行检查。将上面的函数改造一下：

  ```python
  def register(name, gender, **dict):
      if 'city' in dict:
          # 有city参数
          pass
      if 'job' in dict:
          # 有job参数
          print('have a job')
          pass
      print('name:', name, 'gender:', gender, 'otherDict:', dict)
      
  register('Bob', 'man', city = 'New York', job = 'SaleMan')
  ```

  得到这个函数之后，发现可以自由输入别的参数，只是在函数内部做了检验，那么现在如果要限制关键字参数的名字，就可以用命名关键字参数，例如，只接收`city`和`job`作为关键字参数。这种方式定义的函数如下：<font color='red'>（不清楚为什么编译不过，需要查下资料再补充该内容）</font>

  ```python
  def register(name, gender, *, city, job):
      print(name, gender, city, job)
  ```

- #### 参数组合

  在Python中定义函数，可以用必选参数、默认参数、可变参数、关键字参数和命名关键字参数，这5种参数都可以组合使用。但是请注意，参数定义的顺序必须是：必选参数、默认参数、可变参数、命名关键字参数和关键字参数。
